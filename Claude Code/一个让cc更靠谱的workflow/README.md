# 一个让 Claude 更靠谱的编码工作流

本项目提供了一个结构化的五步提示词工作流，旨在解决在使用 Claude 等 AI 助手进行代码开发时遇到的常见问题，例如创建重复文件、忽略现有代码结构以及破坏项目架构等。

通过一个带有强制规则和情景设定的模板，本工作流旨在将 AI 的角色从一个不受约束的“创作者”转变为一个严谨、负责任的“维护者”，使其成为一个更靠谱的编程伙伴。

## 核心问题：为什么 Claude 有时会“不靠谱”？

在复杂的代码项目中，AI 助手有时会表现出以下行为，从而导致项目混乱：
*   **文件泛滥:** 倾向于创建新文件，而不是复用或扩展现有代码，导致功能重复。
*   **忽视架构:** 未能充分理解和尊重现有的代码结构和设计模式。
*   **凭空捏造:** 引用或操作不存在的文件或组件。
*   **破坏性重写:** 倾向于大规模重写，而不是进行风险更小、更精确的重构。

## 解决方案：强制性的五步工作流

本提示词通过一个不可跳过的五步流程来约束 AI 的行为，确保其每一步操作都有据可依。

### 第 1 步：强制阅读并确认规则 (READ REQUIREMENTS)
*   **目标:** 在任务开始前，强制 AI 阅读并确认一系列核心规则。
*   **关键规则:**
    *   这是一个**代码复用和整合**项目。
    *   **优先复用**，在详尽的分析证明无法复用之前，严禁创建新文件。
    *   所有建议**必须引用**具体的现有文件和代码。
    *   违反任何规则将导致其响应**完全无效**。

### 第 2 步：分析当前系统 (ANALYZE CURRENT SYSTEM)
*   **目标:** 在提出任何解决方案之前，强制 AI 必须先分析现有代码库。
*   **产出:** 一份关于项目中与当前任务相关的文件的识别和分析报告。

### 第 3 步：创建实施计划 (CREATE IMPLEMENTATION PLAN)
*   **目标:** 基于第二步的分析，制定一个详细且尊重现有架构的实施计划。
*   **要求:** 计划中的每一步都应与现有代码紧密结合。

### 第 4 步：提供技术细节 (PROVIDE TECHNICAL DETAILS)
*   **目标:** 将计划转化为具体的、可执行的技术细节。
*   **产出:** 包括代码变更、API 修改、组件扩展等在内的具体实现方案。

### 第 5 步：完成交付物 (FINALIZE DELIVERABLES)
*   **目标:** 汇总所有信息，并提供一个包含测试策略和部署考虑的完整交付方案。

## 如何使用

1.  **设置自定义指令:** 将 `prompt.md` 的内容设置为一个自定义命令或模板，方便随时调用。
2.  **启动工作流:** 在您的请求之前，先粘贴或调用这个五步工作流的模板。
3.  **填写您的需求:** 在模板中标记为 `[Your detailed prompt here]` 的位置，填入您具体的开发需求。
4.  **监督 AI 执行:** 观察 AI 是否严格按照五个步骤顺序执行。如果 AI 试图跳过步骤或违反规则，可以立即指出并要求其遵守。

这个工作流通过为 AI 设置清晰的边界和操作框架，能够显著提升其在真实代码项目中的可靠性和可预测性。

---

*来源说明: 本工作流的灵感来源于 Reddit 上的讨论：[My best workflow for working with Claude Code](https://www.reddit.com/r/ClaudeAI/comments/1m3pol4/my_best_workflow_for_working_with_claude_code/)*